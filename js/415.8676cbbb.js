"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[415],{2393:function(e,s,a){var t=a(1178),o=a(2239);class n{getFromPath(e){const s=(0,t.iH)(o.Fs,e);return s}create(e){const s=(0,t.VF)((0,t.iU)((0,t.iH)(o.Fs),"/users")).key;return(0,t.t8)((0,t.iH)(o.Fs,"/users/"+s),{name:e.name,surname:e.surname,id:e.id,phone:e.phone})}createEmployee(e){const s=(0,t.VF)((0,t.iU)((0,t.iH)(o.Fs),"/employees")).key;return(0,t.t8)((0,t.iH)(o.Fs,"/employees/"+s),{name:e.name,surname:e.surname,email:e.email,id:e.id,phone:e.phone,role:e.role})}update(e){return(0,t.Vx)((0,t.iH)(o.Fs),e)}}s["Z"]=new n},1415:function(e,s,a){a.r(s),a.d(s,{default:function(){return k}});var t=a(3396),o=a(9242);const n=e=>((0,t.dD)("data-v-56fa8358"),e=e(),(0,t.Cn)(),e),r={class:"outer-div"},l={class:"login-div"},i=n((()=>(0,t._)("h2",{class:"title"},"LockApp",-1))),c={class:"form-floating"},p=n((()=>(0,t._)("label",{for:"emailInput"},"Email address",-1))),m={class:"form-floating"},u=n((()=>(0,t._)("label",{for:"passInput"},"Password",-1))),d=n((()=>(0,t._)("br",null,null,-1)));function g(e,s,a,n,g,h){const w=(0,t.up)("Message");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",r,[(0,t._)("div",l,[i,(0,t._)("form",{onSubmit:s[3]||(s[3]=(0,o.iM)(((...s)=>e.Login&&e.Login(...s)),["prevent"]))},[(0,t._)("div",c,[(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"emailInput",placeholder:"name@example.com","onUpdate:modelValue":s[0]||(s[0]=e=>g.email=e),required:""},null,512),[[o.nr,g.email]]),p]),(0,t._)("div",m,[(0,t.wy)((0,t._)("input",{type:"password",class:"form-control",id:"passInput",placeholder:"password","onUpdate:modelValue":s[1]||(s[1]=e=>g.password=e),required:""},null,512),[[o.nr,g.password]]),u]),d,(0,t._)("button",{class:"btn btn-secondary",onClick:s[2]||(s[2]=(...e)=>h.login&&h.login(...e))},"Login")],32)])]),((0,t.wg)(),(0,t.j4)(t.lR,{to:"body"},[(0,t.Wm)(w,{messageType:g.messageType,show:g.showMessage,message:g.messageContent,closeMessage:h.closeMessage},null,8,["messageType","show","message","closeMessage"])]))],64)}var h=a(4028),w=a(1178),f=a(2393),v=a(2483),y=a(6170),_={components:{Message:y.Z},data(){return{email:"",password:"",showMessage:!1,messageType:"",messageContent:""}},methods:{closeMessage(){this.showMessage=!1},printMessage(e,s){this.showMessage=!0,this.messageType=e,this.messageContent=s},login(){let e=(0,h.v0)();(0,h.e5)(e,this.email,this.password).then((()=>{sessionStorage.setItem("logged",!0);const s=f.Z.getFromPath("/employees"),a=(0,w.IO)(s,(0,w.g2)("email"),(0,w.EW)(e.currentUser.email));(0,w.U2)(a).then((e=>{e.forEach((e=>{sessionStorage.setItem("role",e.val().role)}))})).then((()=>{this.router.replace("/")})).catch((e=>{this.printMessage("danger","Error occured, report it to administrator!"),console.error(e)}))})).catch((()=>{this.printMessage("warning","Incorrect email or password"),this.email="",this.password=""}))}},setup(){const e=(0,v.tv)();return{router:e}}},M=a(89);const b=(0,M.Z)(_,[["render",g],["__scopeId","data-v-56fa8358"]]);var k=b},6170:function(e,s,a){a.d(s,{Z:function(){return d}});var t=a(3396),o=a(7139);const n=e=>((0,t.dD)("data-v-89fa32fe"),e=e(),(0,t.Cn)(),e),r={class:"close"},l=n((()=>(0,t._)("i",{class:"bi bi-x-lg"},null,-1))),i=[l];function c(e,s,a,n,l,c){return a.show?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,o.C_)(["alert",l.type]),role:"alert"},[(0,t.Uk)((0,o.zw)(a.message)+" ",1),(0,t._)("div",r,[(0,t._)("button",{type:"button",class:"btn button-close",onClick:s[0]||(s[0]=(...e)=>a.closeMessage&&a.closeMessage(...e))},i)])],2)):(0,t.kq)("",!0)}var p={name:"alert-message",props:["show","message","closeMessage","messageType"],data(){return{type:""}},watch:{messageType:function(){this.type="alert-"+this.messageType}},methods:{},mounted(){}},m=a(89);const u=(0,m.Z)(p,[["render",c],["__scopeId","data-v-89fa32fe"]]);var d=u}}]);
//# sourceMappingURL=415.8676cbbb.js.map