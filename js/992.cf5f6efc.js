"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[992],{2393:function(e,s,t){var a=t(1178),o=t(2239);class l{getFromPath(e){const s=(0,a.iH)(o.Fs,e);return s}create(e){const s=(0,a.VF)((0,a.iU)((0,a.iH)(o.Fs),"/users")).key;return(0,a.t8)((0,a.iH)(o.Fs,"/users/"+s),{name:e.name,surname:e.surname,id:e.id,phone:e.phone})}createEmployee(e){const s=(0,a.VF)((0,a.iU)((0,a.iH)(o.Fs),"/employees")).key;return(0,a.t8)((0,a.iH)(o.Fs,"/employees/"+s),{name:e.name,surname:e.surname,email:e.email,id:e.id,phone:e.phone,role:e.role})}update(e){return(0,a.Vx)((0,a.iH)(o.Fs),e)}}s["Z"]=new l},2992:function(e,s,t){t.r(s),t.d(s,{default:function(){return F}});var a=t(3396),o=t(9242);const l=e=>((0,a.dD)("data-v-43332156"),e=e(),(0,a.Cn)(),e),n={class:"content"},r={class:"wrapper"},i={class:"form"},m={class:"form-group"},p=l((()=>(0,a._)("label",{for:"name"},"Name",-1))),d={class:"form-group"},c=l((()=>(0,a._)("label",{for:"description"},"Surname",-1))),u={class:"form-group"},h=l((()=>(0,a._)("label",{for:"description"},"Email",-1))),g={class:"form-group"},y=l((()=>(0,a._)("label",{for:"description"},"Password",-1))),w={class:"form-group"},f=l((()=>(0,a._)("label",{for:"description"},"Phone",-1))),v={class:"form-group"},_=l((()=>(0,a._)("option",{disabled:"",value:""},"Select role",-1))),b=l((()=>(0,a._)("option",null,"Dyspozytor",-1))),k=l((()=>(0,a._)("option",null,"Admin",-1))),M=[_,b,k];function C(e,s,t,l,_,b){const k=(0,a.up)("Message"),C=(0,a.up)("MainLayout");return(0,a.wg)(),(0,a.j4)(C,null,{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",r,[(0,a._)("div",i,[(0,a._)("div",m,[p,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"name",required:"","onUpdate:modelValue":s[0]||(s[0]=e=>_.employee.name=e),name:"name"},null,512),[[o.nr,_.employee.name]])]),(0,a._)("div",d,[c,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"surname",required:"","onUpdate:modelValue":s[1]||(s[1]=e=>_.employee.surname=e),name:"surname"},null,512),[[o.nr,_.employee.surname]])]),(0,a._)("div",u,[h,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"email",required:"","onUpdate:modelValue":s[2]||(s[2]=e=>_.employee.email=e),name:"email"},null,512),[[o.nr,_.employee.email]])]),(0,a._)("div",g,[y,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"password",required:"","onUpdate:modelValue":s[3]||(s[3]=e=>_.employee.password=e),name:"password"},null,512),[[o.nr,_.employee.password]])]),(0,a._)("div",w,[f,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"phone",required:"","onUpdate:modelValue":s[4]||(s[4]=e=>_.employee.phone=e),name:"phone"},null,512),[[o.nr,_.employee.phone]])]),(0,a._)("div",v,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>_.role=e)},M,512),[[o.bM,_.role]])]),(0,a._)("button",{onClick:s[6]||(s[6]=(...e)=>b.saveEmployee&&b.saveEmployee(...e)),class:"btn btn-success"},"Submit")])])]),((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(k,{messageType:_.messageType,show:_.showMessage,message:_.messageContent,closeMessage:b.closeMessage},null,8,["messageType","show","message","closeMessage"])]))])),_:1})}var U=t(2393),E=t(1178),I=t(4028),A=t(6170),Z=t(5871),T={name:"add-employee",components:{MainLayout:Z.Z,Message:A.Z},data(){return{employee:{name:"",surname:"",email:"",password:"",id:"",phone:"",role:""},users:[],role:"",submitted:!1,alert:"",showMessage:!1,messageType:"",messageContent:""}},methods:{printMessage(e,s){this.showMessage=!0,this.messageType=e,this.messageContent=s},closeMessage(){this.showMessage=!1},saveEmployee(){if(this.validate()){this.capitalizeFirstLetter();var e={name:this.employee.name,surname:this.employee.surname,email:this.employee.email,id:this.setId(),phone:this.employee.phone,role:this.role};const s=(0,I.v0)();(0,I.Xb)(s,this.employee.email,this.employee.password).then((()=>{U.Z.createEmployee(e).then((()=>{this.submitted=!0,this.printMessage("success",this.alert),this.newEmployee()})).catch((e=>{this.printMessage("danger","Error occured, report it to administrator!"),console.log(e)}))})).catch((e=>{this.printMessage("danger","Error occured, report it to administrator!"),console.log(e)}))}else this.printMessage("warning",this.alert)},capitalizeFirstLetter(){this.employee.name=this.employee.name.charAt(0).toUpperCase()+this.employee.name.slice(1),this.employee.surname=this.employee.surname.charAt(0).toUpperCase()+this.employee.surname.slice(1),this.employee.surname.indexOf("-")>=0&&(this.employee.surname=this.employee.surname.slice(0,this.employee.surname.indexOf("-")+1)+this.employee.surname.charAt(this.employee.surname.indexOf("-")+1).toUpperCase()+this.employee.surname.slice(this.employee.surname.indexOf("-")+2))},setId(){let e;if(0===this.users.length)e=1;else{let s=this.users[this.users.length-1].id;e=s.replace("ID",""),e++}const s="ID"+e;return s},newEmployee(){this.employee={name:"",surname:"",email:"",password:"",id:"",phone:"",role:""}},validate(){this.alert="",""==this.employee.name&&(this.alert+="Name cannot be empty. "),/^[A-Za-ząęśżźćółńĄĘŚŻŹĆÓŁŃ]+$/.test(this.employee.name)||(this.alert+="Name can contain only letters from polish alphabet. "),""==this.employee.surname&&(this.alert+="Surname cannot be empty. "),/^[A-Za-ząęśżźćółńĄĘŚŻŹĆÓŁŃ-]+$/.test(this.employee.surname)||(this.alert+="Surname can contain only letters from polish alphabet and - in case of double surname. "),""==this.employee.email&&(this.alert+="Email cannot be empty. ");for(let e=0;e<this.users.length;e++)if(this.employee.email===this.users[e].email){this.alert+="Email already in use. ";break}return""==this.employee.password?this.alert+="Password cannot be empty. ":this.employee.password.length<8&&(this.alert+="Password must be longer than 8 characters. "),""==this.employee.phone?this.alert+="Phone cannot be empty. ":(this.employee.phone.toString().length<9||this.employee.phone.toString().length>11)&&(this.alert+="Phone number has to have 9 to 11 characters. "),""==this.role&&(this.alert+="Select role for new employee. "),""===this.alert&&(this.alert+="Employee created successfully!",!0)},onDataChange(e){let s=[];e.forEach((e=>{let t=e.val();s.push({key:e.key,id:t.id,email:t.email})})),this.users=s}},mounted(){let e;(0,E.jM)(U.Z.getFromPath("/employees"),(s=>{e=s,this.onDataChange(e)}))}},q=t(89);const D=(0,q.Z)(T,[["render",C],["__scopeId","data-v-43332156"]]);var F=D},5871:function(e,s,t){t.d(s,{Z:function(){return T}});var a=t(3396);const o={class:"layout"};function l(e,s,t,l,n,r){const i=(0,a.up)("NavBar");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(i),(0,a.WI)(e.$slots,"default",{},void 0,!0)])}const n=e=>((0,a.dD)("data-v-d5aeafae"),e=e(),(0,a.Cn)(),e),r={key:0,class:"navbar bg-dark"},i={class:"links"},m={class:"logo"},p=(0,a.Uk)("LockManage"),d={class:"nav"},c=n((()=>(0,a._)("li",{class:"item"},"Users",-1))),u=n((()=>(0,a._)("li",{class:"item"},"Add User",-1))),h=n((()=>(0,a._)("li",{class:"item"},"Add Employee",-1))),g=n((()=>(0,a._)("li",{class:"item"},"Add Lock",-1))),y=n((()=>(0,a._)("li",{class:"item"},"Simulator",-1))),w={class:"buttons"},f={class:"reset"},v={class:"logout"};function _(e,s,t,o,l,n){const _=(0,a.up)("router-link"),b=(0,a.up)("Message");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l.logged?((0,a.wg)(),(0,a.iD)("nav",r,[(0,a._)("div",i,[(0,a._)("div",m,[(0,a.Wm)(_,{to:"/",class:"logo-link"},{default:(0,a.w5)((()=>[p])),_:1})]),(0,a._)("ul",d,["Admin"===l.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:0,to:"/users",class:"nav-link"},{default:(0,a.w5)((()=>[c])),_:1})):(0,a.kq)("",!0),"Admin"===l.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:1,to:"/add",class:"nav-link"},{default:(0,a.w5)((()=>[u])),_:1})):(0,a.kq)("",!0),"Admin"===l.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:2,to:"/addEmployee",class:"nav-link"},{default:(0,a.w5)((()=>[h])),_:1})):(0,a.kq)("",!0),"Admin"===l.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:3,to:"/addLock",class:"nav-link"},{default:(0,a.w5)((()=>[g])),_:1})):(0,a.kq)("",!0),"Admin"===l.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:4,to:"/sim",class:"nav-link"},{default:(0,a.w5)((()=>[y])),_:1})):(0,a.kq)("",!0)])]),(0,a._)("div",w,[(0,a._)("div",f,[(0,a._)("button",{onClick:s[0]||(s[0]=(...e)=>n.resetPassword&&n.resetPassword(...e)),class:"btn btn-secondary"}," Reset password ")]),(0,a._)("div",v,[(0,a._)("button",{onClick:s[1]||(s[1]=(...e)=>o.logout&&o.logout(...e)),class:"btn btn-secondary"},"Logout")])])])):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(b,{messageType:l.messageType,show:l.showMessage,message:l.messageContent,closeMessage:n.closeMessage},null,8,["messageType","show","message","closeMessage"])]))],64)}var b=t(2239),k=t(4028),M=t(6170),C={name:"nav-bar",components:{Message:M.Z},setup(){const e=()=>{b.I8.signOut(b.I8),sessionStorage.clear()};return{logout:e}},data(){return{logged:!1,loggedRole:"",showMessage:!1,messageType:"",messageContent:""}},methods:{printMessage(e,s){this.showMessage=!0,this.messageType=e,this.messageContent=s},closeMessage(){this.showMessage=!1},resetPassword(){(0,k.LS)(b.I8,b.I8.currentUser.email).then((()=>{this.printMessage("success","Password resent sent, check your mailbox!")})).catch((e=>{console.log(e)}))}},mounted(){b.I8.currentUser?(this.logged=!0,this.loggedRole=sessionStorage.getItem("role")):this.logged=!1}},U=t(89);const E=(0,U.Z)(C,[["render",_],["__scopeId","data-v-d5aeafae"]]);var I=E,A={name:"users-list",components:{NavBar:I},data(){return{}},methods:{},mounted(){}};const Z=(0,U.Z)(A,[["render",l],["__scopeId","data-v-1b0e5f23"]]);var T=Z},6170:function(e,s,t){t.d(s,{Z:function(){return u}});var a=t(3396),o=t(7139);const l=e=>((0,a.dD)("data-v-89fa32fe"),e=e(),(0,a.Cn)(),e),n={class:"close"},r=l((()=>(0,a._)("i",{class:"bi bi-x-lg"},null,-1))),i=[r];function m(e,s,t,l,r,m){return t.show?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,o.C_)(["alert",r.type]),role:"alert"},[(0,a.Uk)((0,o.zw)(t.message)+" ",1),(0,a._)("div",n,[(0,a._)("button",{type:"button",class:"btn button-close",onClick:s[0]||(s[0]=(...e)=>t.closeMessage&&t.closeMessage(...e))},i)])],2)):(0,a.kq)("",!0)}var p={name:"alert-message",props:["show","message","closeMessage","messageType"],data(){return{type:""}},watch:{messageType:function(){this.type="alert-"+this.messageType}},methods:{},mounted(){}},d=t(89);const c=(0,d.Z)(p,[["render",m],["__scopeId","data-v-89fa32fe"]]);var u=c}}]);
//# sourceMappingURL=992.cf5f6efc.js.map