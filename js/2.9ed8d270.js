"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[2],{2393:function(e,s,t){var a=t(1178),n=t(2239);class r{getFromPath(e){const s=(0,a.iH)(n.Fs,e);return s}create(e){const s=(0,a.VF)((0,a.iU)((0,a.iH)(n.Fs),"/users")).key;return(0,a.t8)((0,a.iH)(n.Fs,"/users/"+s),{name:e.name,surname:e.surname,id:e.id,phone:e.phone})}createEmployee(e){const s=(0,a.VF)((0,a.iU)((0,a.iH)(n.Fs),"/employees")).key;return(0,a.t8)((0,a.iH)(n.Fs,"/employees/"+s),{name:e.name,surname:e.surname,email:e.email,id:e.id,phone:e.phone,role:e.role})}update(e){return(0,a.Vx)((0,a.iH)(n.Fs),e)}}s["Z"]=new r},5002:function(e,s,t){t.r(s),t.d(s,{default:function(){return M}});var a=t(3396),n=t(9242);const r=e=>((0,a.dD)("data-v-527a683c"),e=e(),(0,a.Cn)(),e),o={class:"content"},l={class:"wrapper"},i={class:"form"},u={class:"form-group"},c=r((()=>(0,a._)("label",{for:"name"},"Name",-1))),m={class:"form-group"},d=r((()=>(0,a._)("label",{for:"description"},"Surname",-1))),h={class:"form-group"},g=r((()=>(0,a._)("label",{for:"description"},"Phone",-1)));function p(e,s,t,r,p,v){const y=(0,a.up)("Message"),w=(0,a.up)("MainLayout");return(0,a.wg)(),(0,a.j4)(w,null,{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a._)("div",l,[(0,a._)("div",i,[(0,a._)("div",u,[c,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"name",required:"","onUpdate:modelValue":s[0]||(s[0]=e=>p.user.name=e),name:"name"},null,512),[[n.nr,p.user.name]])]),(0,a._)("div",m,[d,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"surname",required:"","onUpdate:modelValue":s[1]||(s[1]=e=>p.user.surname=e),name:"surname"},null,512),[[n.nr,p.user.surname]])]),(0,a._)("div",h,[g,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"phone",required:"","onUpdate:modelValue":s[2]||(s[2]=e=>p.user.phone=e),name:"phone"},null,512),[[n.nr,p.user.phone]])]),(0,a._)("button",{onClick:s[3]||(s[3]=(...e)=>v.saveUser&&v.saveUser(...e)),class:"btn btn-success"},"Submit")])])]),((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(y,{messageType:p.messageType,show:p.showMessage,message:p.messageContent,closeMessage:v.closeMessage},null,8,["messageType","show","message","closeMessage"])]))])),_:1})}var v=t(2393),y=t(1178),w=t(6170),f=t(5871),_={name:"add-user",components:{Message:w.Z,MainLayout:f.Z},data(){return{user:{name:"",surname:"",id:"",phone:""},users:[],submitted:!1,alert:"",showMessage:!1,messageType:"",messageContent:""}},methods:{printMessage(e,s){this.showMessage=!0,this.messageType=e,this.messageContent=s},closeMessage(){this.showMessage=!1},saveUser(){if(this.validate()){this.capitalizeFirstLetter();var e={name:this.user.name,surname:this.user.surname,id:this.setId(),phone:this.user.phone};v.Z.create(e).then((()=>{this.submitted=!0,this.printMessage("success",this.alert),this.newUser()})).catch((e=>{this.printMessage("danger","Error occured, report it to administrator!"),console.log(e)}))}else this.printMessage("warning",this.alert)},capitalizeFirstLetter(){this.user.name=this.user.name.charAt(0).toUpperCase()+this.user.name.slice(1),this.user.surname=this.user.surname.charAt(0).toUpperCase()+this.user.surname.slice(1),this.user.surname.indexOf("-")>=0&&(this.user.surname=this.user.surname.slice(0,this.user.surname.indexOf("-")+1)+this.user.surname.charAt(this.user.surname.indexOf("-")+1).toUpperCase()+this.user.surname.slice(this.user.surname.indexOf("-")+2))},setId(){let e;if(0===this.users.length)e=1;else{let s=this.users[this.users.length-1].id;e=s.replace("ID",""),e++}const s="ID"+e;return s},newUser(){this.user={name:"",surname:"",id:"",phone:"",blocked:!0},this.alert=""},validate(){return this.alert="",""==this.user.name&&(this.alert+="Name cannot be empty. "),/^[A-Za-ząęśżźćółńĄĘŚŻŹĆÓŁŃ]+$/.test(this.user.name)||(this.alert+="Name can contain only letters from polish alphabet. "),""==this.user.surname&&(this.alert+="Surname cannot be empty. "),/^[A-Za-ząęśżźćółńĄĘŚŻŹĆÓŁŃ-]+$/.test(this.user.surname)||(this.alert+="Surname can contain only letters from polish alphabet and - in case of double surname. "),""==this.user.phone?this.alert+="Phone cannot be empty \n":(this.user.phone.toString().length<9||this.user.phone.toString().length>11)&&(this.alert+="Phone number has to have 9 to 11 characters. "),""===this.alert&&(this.alert+="User created successfully!",!0)},onDataChange(e){let s=[];e.forEach((e=>{let t=e.val();s.push({key:e.key,name:t.name,surname:t.surname,id:t.id,password:t.password,phone:t.phone,blocked:t.blocked})})),this.users=s}},mounted(){let e;(0,y.jM)(v.Z.getFromPath("/users"),(s=>{e=s,this.onDataChange(e)}))}},k=t(89);const b=(0,k.Z)(_,[["render",p],["__scopeId","data-v-527a683c"]]);var M=b},5871:function(e,s,t){t.d(s,{Z:function(){return F}});var a=t(3396);const n={class:"layout"};function r(e,s,t,r,o,l){const i=(0,a.up)("NavBar");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(i),(0,a.WI)(e.$slots,"default",{},void 0,!0)])}const o=e=>((0,a.dD)("data-v-d5aeafae"),e=e(),(0,a.Cn)(),e),l={key:0,class:"navbar bg-dark"},i={class:"links"},u={class:"logo"},c=(0,a.Uk)("LockManage"),m={class:"nav"},d=o((()=>(0,a._)("li",{class:"item"},"Users",-1))),h=o((()=>(0,a._)("li",{class:"item"},"Add User",-1))),g=o((()=>(0,a._)("li",{class:"item"},"Add Employee",-1))),p=o((()=>(0,a._)("li",{class:"item"},"Add Lock",-1))),v=o((()=>(0,a._)("li",{class:"item"},"Simulator",-1))),y={class:"buttons"},w={class:"reset"},f={class:"logout"};function _(e,s,t,n,r,o){const _=(0,a.up)("router-link"),k=(0,a.up)("Message");return(0,a.wg)(),(0,a.iD)(a.HY,null,[r.logged?((0,a.wg)(),(0,a.iD)("nav",l,[(0,a._)("div",i,[(0,a._)("div",u,[(0,a.Wm)(_,{to:"/",class:"logo-link"},{default:(0,a.w5)((()=>[c])),_:1})]),(0,a._)("ul",m,["Admin"===r.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:0,to:"/users",class:"nav-link"},{default:(0,a.w5)((()=>[d])),_:1})):(0,a.kq)("",!0),"Admin"===r.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:1,to:"/add",class:"nav-link"},{default:(0,a.w5)((()=>[h])),_:1})):(0,a.kq)("",!0),"Admin"===r.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:2,to:"/addEmployee",class:"nav-link"},{default:(0,a.w5)((()=>[g])),_:1})):(0,a.kq)("",!0),"Admin"===r.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:3,to:"/addLock",class:"nav-link"},{default:(0,a.w5)((()=>[p])),_:1})):(0,a.kq)("",!0),"Admin"===r.loggedRole?((0,a.wg)(),(0,a.j4)(_,{key:4,to:"/sim",class:"nav-link"},{default:(0,a.w5)((()=>[v])),_:1})):(0,a.kq)("",!0)])]),(0,a._)("div",y,[(0,a._)("div",w,[(0,a._)("button",{onClick:s[0]||(s[0]=(...e)=>o.resetPassword&&o.resetPassword(...e)),class:"btn btn-secondary"}," Reset password ")]),(0,a._)("div",f,[(0,a._)("button",{onClick:s[1]||(s[1]=(...e)=>n.logout&&n.logout(...e)),class:"btn btn-secondary"},"Logout")])])])):(0,a.kq)("",!0),((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a.Wm)(k,{messageType:r.messageType,show:r.showMessage,message:r.messageContent,closeMessage:o.closeMessage},null,8,["messageType","show","message","closeMessage"])]))],64)}var k=t(2239),b=t(4028),M=t(6170),C={name:"nav-bar",components:{Message:M.Z},setup(){const e=()=>{k.I8.signOut(k.I8),sessionStorage.clear()};return{logout:e}},data(){return{logged:!1,loggedRole:"",showMessage:!1,messageType:"",messageContent:""}},methods:{printMessage(e,s){this.showMessage=!0,this.messageType=e,this.messageContent=s},closeMessage(){this.showMessage=!1},resetPassword(){(0,b.LS)(k.I8,k.I8.currentUser.email).then((()=>{this.printMessage("success","Password resent sent, check your mailbox!")})).catch((e=>{console.log(e)}))}},mounted(){k.I8.currentUser?(this.logged=!0,this.loggedRole=sessionStorage.getItem("role")):this.logged=!1}},U=t(89);const I=(0,U.Z)(C,[["render",_],["__scopeId","data-v-d5aeafae"]]);var Z=I,A={name:"users-list",components:{NavBar:Z},data(){return{}},methods:{},mounted(){}};const T=(0,U.Z)(A,[["render",r],["__scopeId","data-v-1b0e5f23"]]);var F=T},6170:function(e,s,t){t.d(s,{Z:function(){return h}});var a=t(3396),n=t(7139);const r=e=>((0,a.dD)("data-v-89fa32fe"),e=e(),(0,a.Cn)(),e),o={class:"close"},l=r((()=>(0,a._)("i",{class:"bi bi-x-lg"},null,-1))),i=[l];function u(e,s,t,r,l,u){return t.show?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,n.C_)(["alert",l.type]),role:"alert"},[(0,a.Uk)((0,n.zw)(t.message)+" ",1),(0,a._)("div",o,[(0,a._)("button",{type:"button",class:"btn button-close",onClick:s[0]||(s[0]=(...e)=>t.closeMessage&&t.closeMessage(...e))},i)])],2)):(0,a.kq)("",!0)}var c={name:"alert-message",props:["show","message","closeMessage","messageType"],data(){return{type:""}},watch:{messageType:function(){this.type="alert-"+this.messageType}},methods:{},mounted(){}},m=t(89);const d=(0,m.Z)(c,[["render",u],["__scopeId","data-v-89fa32fe"]]);var h=d}}]);
//# sourceMappingURL=2.9ed8d270.js.map