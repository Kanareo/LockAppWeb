{"version":3,"file":"js/415.8676cbbb.js","mappings":"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","sources":["webpack://vue-app/./src/services/DataService.js","webpack://vue-app/./src/components/LoginView.vue","webpack://vue-app/./src/components/LoginView.vue?3311","webpack://vue-app/./src/components/Message.vue","webpack://vue-app/./src/components/Message.vue?ede3"],"sourcesContent":["import { ref, set, child, push, update } from \"firebase/database\";\r\nimport { database } from \"../firebase\";\r\n\r\nclass DataService {\r\n  /*getAll() {\r\n    const db = ref(database, \"/users\");\r\n    return db;\r\n  }\r\n  getAllLocks() {\r\n    const db = ref(database, \"/locks\");\r\n    return db;\r\n  }\r\n  getUserCredentials(lock, user) {\r\n    const db = ref(database, \"/locks/\" + lock + \"/users/\" + user);\r\n    return db;\r\n  }\r\n  getUserSchedule(lock, user) {\r\n    const db = ref(database, \"/locks/\" + lock + \"/schedule/\" + user);\r\n    return db;\r\n  }*/\r\n  getFromPath(path) {\r\n    const db = ref(database, path);\r\n    return db;\r\n  }\r\n  create(user) {\r\n    const newPostKey = push(child(ref(database), \"/users\")).key;\r\n    //console.log(user, newPostKey);\r\n    return set(ref(database, \"/users/\" + newPostKey), {\r\n      name: user.name,\r\n      surname: user.surname,\r\n      id: user.id,\r\n      phone: user.phone,\r\n    });\r\n  }\r\n  createEmployee(employee) {\r\n    const newPostKey = push(child(ref(database), \"/employees\")).key;\r\n    //console.log(user, newPostKey);\r\n    return set(ref(database, \"/employees/\" + newPostKey), {\r\n      name: employee.name,\r\n      surname: employee.surname,\r\n      email: employee.email,\r\n      id: employee.id,\r\n      phone: employee.phone,\r\n      role: employee.role,\r\n    });\r\n  }\r\n  update(updates) {\r\n    return update(ref(database), updates);\r\n  }\r\n}\r\nexport default new DataService();\r\n","<template>\r\n  <div class=\"outer-div\">\r\n    <div class=\"login-div\">\r\n      <h2 class=\"title\">LockApp</h2>\r\n      <form @submit.prevent=\"Login\">\r\n        <div class=\"form-floating\">\r\n          <input\r\n            type=\"email\"\r\n            class=\"form-control\"\r\n            id=\"emailInput\"\r\n            placeholder=\"name@example.com\"\r\n            v-model=\"email\"\r\n            required\r\n          />\r\n          <label for=\"emailInput\">Email address</label>\r\n        </div>\r\n        <div class=\"form-floating\">\r\n          <input\r\n            type=\"password\"\r\n            class=\"form-control\"\r\n            id=\"passInput\"\r\n            placeholder=\"password\"\r\n            v-model=\"password\"\r\n            required\r\n          />\r\n          <label for=\"passInput\">Password</label>\r\n        </div>\r\n        <br />\r\n        <button class=\"btn btn-secondary\" @click=\"login\">Login</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <Teleport to=\"body\">\r\n    <Message\r\n      :messageType=\"messageType\"\r\n      :show=\"showMessage\"\r\n      :message=\"messageContent\"\r\n      :closeMessage=\"closeMessage\"\r\n    />\r\n  </Teleport>\r\n</template>\r\n\r\n<script>\r\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { query, orderByChild, equalTo, get } from \"firebase/database\";\r\nimport DataService from \"../services/DataService\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Message from \"./Message\";\r\nexport default {\r\n  components: { Message },\r\n  data() {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      showMessage: false,\r\n      messageType: \"\",\r\n      messageContent: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    closeMessage() {\r\n      this.showMessage = false;\r\n    },\r\n    printMessage(type, message) {\r\n      //console.log(type, message);\r\n      this.showMessage = true;\r\n      this.messageType = type;\r\n      this.messageContent = message;\r\n    },\r\n    login() {\r\n      let auth = getAuth();\r\n\r\n      signInWithEmailAndPassword(auth, this.email, this.password)\r\n        .then(() => {\r\n          sessionStorage.setItem(\"logged\", true);\r\n          const dbRef = DataService.getFromPath(\"/employees\");\r\n          const dbQuery = query(\r\n            dbRef,\r\n            orderByChild(\"email\"),\r\n            equalTo(auth.currentUser.email)\r\n          );\r\n          get(dbQuery)\r\n            .then((snapshot) => {\r\n              snapshot.forEach((child) => {\r\n                sessionStorage.setItem(\"role\", child.val().role);\r\n              });\r\n            })\r\n            .then(() => {\r\n              this.router.replace(\"/\");\r\n            })\r\n            .catch((error) => {\r\n              this.printMessage(\r\n                \"danger\",\r\n                \"Error occured, report it to administrator!\"\r\n              );\r\n              console.error(error);\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.printMessage(\"warning\", \"Incorrect email or password\");\r\n          //alert(\"Incorrect email or password\");\r\n          this.email = \"\";\r\n          this.password = \"\";\r\n        });\r\n    },\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    return { router };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.outer-div {\r\n  padding: 1rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-sizing: border-box;\r\n}\r\n.login-div {\r\n  background: #44474a;\r\n  padding: 1.5rem;\r\n  box-shadow: 0 0.5rem 1rem #00000026;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 0.25rem;\r\n  box-sizing: border-box;\r\n}\r\n.form-floating {\r\n  color: #c8c8c8;\r\n  margin-top: 1rem;\r\n}\r\n.title {\r\n  margin: 0;\r\n  color: #000;\r\n}\r\n</style>\r\n","import { render } from \"./LoginView.vue?vue&type=template&id=56fa8358&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=56fa8358&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Teczka Michała J\\\\Studia\\\\Inżynierka\\\\vue-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-56fa8358\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"alert\" :class=\"type\" role=\"alert\" v-if=\"show\">\r\n    {{ message }}\r\n    <div class=\"close\">\r\n      <button type=\"button\" class=\"btn button-close\" @click=\"closeMessage\">\r\n        <i class=\"bi bi-x-lg\"></i>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"alert-message\",\r\n  props: [\"show\", \"message\", \"closeMessage\", \"messageType\"],\r\n  data() {\r\n    return {\r\n      type: \"\",\r\n    };\r\n  },\r\n  watch: {\r\n    messageType: function () {\r\n      this.type = \"alert-\" + this.messageType;\r\n    },\r\n  },\r\n  methods: {},\r\n  mounted() {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.alert {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  margin: 1em;\r\n  border-radius: 0.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  box-shadow: #00000070 0 0 9px 2px;\r\n  transform: translateY(-100%);\r\n  animation: slideIn 250ms cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;\r\n}\r\n@keyframes slideIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateY(0%);\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Message.vue?vue&type=template&id=89fa32fe&scoped=true\"\nimport script from \"./Message.vue?vue&type=script&lang=js\"\nexport * from \"./Message.vue?vue&type=script&lang=js\"\n\nimport \"./Message.vue?vue&type=style&index=0&id=89fa32fe&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Teczka Michała J\\\\Studia\\\\Inżynierka\\\\vue-app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-89fa32fe\"]])\n\nexport default __exports__"],"names":["DataService","getFromPath","path","db","ref","database","create","user","newPostKey","push","child","key","set","name","surname","id","phone","createEmployee","employee","email","role","update","updates","class","_createElementVNode","for","_hoisted_3","onSubmit","_ctx","type","placeholder","$data","$event","required","_hoisted_5","_hoisted_7","_hoisted_8","onClick","$options","_createBlock","_Teleport","to","_createVNode","_component_Message","messageType","show","message","closeMessage","components","Message","data","password","showMessage","messageContent","methods","this","printMessage","login","auth","getAuth","signInWithEmailAndPassword","then","sessionStorage","setItem","dbRef","dbQuery","query","orderByChild","equalTo","currentUser","get","snapshot","forEach","val","router","replace","catch","error","console","setup","useRouter","__exports__","render","_hoisted_2","$props","_createElementBlock","props","watch","mounted"],"sourceRoot":""}