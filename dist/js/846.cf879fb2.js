"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[846],{2393:function(e,s,a){var t=a(1178),o=a(2239);class n{getFromPath(e){const s=(0,t.iH)(o.Fs,e);return s}create(e){const s=(0,t.VF)((0,t.iU)((0,t.iH)(o.Fs),"/users")).key;return(0,t.t8)((0,t.iH)(o.Fs,"/users/"+s),{name:e.name,surname:e.surname,id:e.id,phone:e.phone})}createEmployee(e){const s=(0,t.VF)((0,t.iU)((0,t.iH)(o.Fs),"/employees")).key;return(0,t.t8)((0,t.iH)(o.Fs,"/employees/"+s),{name:e.name,surname:e.surname,email:e.email,id:e.id,phone:e.phone,role:e.role})}update(e){return(0,t.Vx)((0,t.iH)(o.Fs),e)}}s["Z"]=new n},4846:function(e,s,a){a.r(s),a.d(s,{default:function(){return z}});var t=a(3396),o=a(9242);const n=e=>((0,t.dD)("data-v-228663f5"),e=e(),(0,t.Cn)(),e),l={class:"content"},i={class:"wrapper"},c={class:"form"},r={class:"form-group"},u=n((()=>(0,t._)("label",{for:"name"},"Name",-1))),d={class:"form-group"},m=n((()=>(0,t._)("label",{for:"description"},"Description (Can be leave empty)",-1))),g={class:"form-group"},p=n((()=>(0,t._)("option",{disabled:"",value:""},"Select auth type",-1))),h=n((()=>(0,t._)("option",null,"c",-1))),k=n((()=>(0,t._)("option",null,"c+w",-1))),y=n((()=>(0,t._)("option",null,"cw",-1))),w=[p,h,k,y];function v(e,s,a,n,p,h){const k=(0,t.up)("Message"),y=(0,t.up)("MainLayout");return(0,t.wg)(),(0,t.j4)(y,null,{default:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t._)("div",i,[(0,t._)("div",c,[(0,t._)("div",r,[u,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"name",required:"","onUpdate:modelValue":s[0]||(s[0]=e=>p.lock.name=e),name:"name"},null,512),[[o.nr,p.lock.name]])]),(0,t._)("div",d,[m,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"email",required:"","onUpdate:modelValue":s[1]||(s[1]=e=>p.lock.description=e),name:"email"},null,512),[[o.nr,p.lock.description]])]),(0,t._)("div",g,[(0,t.wy)((0,t._)("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>p.lock.authType=e)},w,512),[[o.bM,p.lock.authType]])]),(0,t._)("button",{onClick:s[3]||(s[3]=(...e)=>h.saveLock&&h.saveLock(...e)),class:"btn btn-success"},"Save")])])]),((0,t.wg)(),(0,t.j4)(t.lR,{to:"body"},[(0,t.Wm)(k,{messageType:p.messageType,show:p.showMessage,message:p.messageContent,closeMessage:h.closeMessage},null,8,["messageType","show","message","closeMessage"])]))])),_:1})}var f=a(2393),_=a(1178),b=a(6170),M=a(5871),T={name:"add-lock",components:{MainLayout:M.Z,Message:b.Z},data(){return{lock:{name:"",description:"",authType:"",authInfo:""},alert:"",showMessage:!1,messageType:"",messageContent:""}},methods:{printMessage(e,s){this.showMessage=!0,this.messageType=e,this.messageContent=s},closeMessage(){this.showMessage=!1},saveLock(){if(this.validate()){const e={};e["/locksList/"+this.lock.name]="Device",e["/locks/"+this.lock.name+"/info/authType"]=this.lock.authType,e["/locks/"+this.lock.name+"/info/authInfo"]=this.getAuthInfo(this.lock.authType),""!=this.lock.description&&(e["/locks/"+this.lock.name+"/info/lockInfo"]=this.lock.description),f.Z.update(e).then((()=>{this.printMessage("success",this.alert),this.newLock()})).catch((e=>{this.printMessage("danger","Error occured, report it to administrator!"),console.log(e)}))}else this.printMessage("warning",this.alert)},getAuthInfo(e){return"c"==e?"Weryfikacja użytkownika za pomocą ID i hasła":"c+w"==e?"Weryfikacja użytkownika za pomocą ID i hasła, w przypadku próby otworzenia zamka poza harmonogramem wymagana jest autoryzacja osoby trzeciej":"cw"==e?"Weryfikacja użytkownika za pomocą ID i hasła, potwierdzona przez osobę trzecią. Dostęp wyłącznie w czasie harmonogramu":void 0},newLock(){this.lock={name:"",description:"",authType:"",authInfo:""}},validate(){return this.alert="",""==this.lock.name&&(this.alert+="Name cannot be empty. "),this.nameCheck(this.lock.name)&&(this.alert+="Name already in use. "),""==this.lock.authType&&(this.alert+="Select auth type for lock. "),""===this.alert&&(this.alert+="Lock created successfully!",!0)},nameCheck(e){let s;return(0,_.jM)(f.Z.getFromPath("/locksList/"+e),(e=>{s=!!e.exists()})),s}},mounted(){}},I=a(89);const C=(0,I.Z)(T,[["render",v],["__scopeId","data-v-228663f5"]]);var z=C},5871:function(e,s,a){a.d(s,{Z:function(){return D}});var t=a(3396);const o={class:"layout"};function n(e,s,a,n,l,i){const c=(0,t.up)("NavBar");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)(c),(0,t.WI)(e.$slots,"default",{},void 0,!0)])}const l=e=>((0,t.dD)("data-v-d5aeafae"),e=e(),(0,t.Cn)(),e),i={key:0,class:"navbar bg-dark"},c={class:"links"},r={class:"logo"},u=(0,t.Uk)("LockManage"),d={class:"nav"},m=l((()=>(0,t._)("li",{class:"item"},"Users",-1))),g=l((()=>(0,t._)("li",{class:"item"},"Add User",-1))),p=l((()=>(0,t._)("li",{class:"item"},"Add Employee",-1))),h=l((()=>(0,t._)("li",{class:"item"},"Add Lock",-1))),k=l((()=>(0,t._)("li",{class:"item"},"Simulator",-1))),y={class:"buttons"},w={class:"reset"},v={class:"logout"};function f(e,s,a,o,n,l){const f=(0,t.up)("router-link"),_=(0,t.up)("Message");return(0,t.wg)(),(0,t.iD)(t.HY,null,[n.logged?((0,t.wg)(),(0,t.iD)("nav",i,[(0,t._)("div",c,[(0,t._)("div",r,[(0,t.Wm)(f,{to:"/",class:"logo-link"},{default:(0,t.w5)((()=>[u])),_:1})]),(0,t._)("ul",d,["Admin"===n.loggedRole?((0,t.wg)(),(0,t.j4)(f,{key:0,to:"/users",class:"nav-link"},{default:(0,t.w5)((()=>[m])),_:1})):(0,t.kq)("",!0),"Admin"===n.loggedRole?((0,t.wg)(),(0,t.j4)(f,{key:1,to:"/add",class:"nav-link"},{default:(0,t.w5)((()=>[g])),_:1})):(0,t.kq)("",!0),"Admin"===n.loggedRole?((0,t.wg)(),(0,t.j4)(f,{key:2,to:"/addEmployee",class:"nav-link"},{default:(0,t.w5)((()=>[p])),_:1})):(0,t.kq)("",!0),"Admin"===n.loggedRole?((0,t.wg)(),(0,t.j4)(f,{key:3,to:"/addLock",class:"nav-link"},{default:(0,t.w5)((()=>[h])),_:1})):(0,t.kq)("",!0),"Admin"===n.loggedRole?((0,t.wg)(),(0,t.j4)(f,{key:4,to:"/sim",class:"nav-link"},{default:(0,t.w5)((()=>[k])),_:1})):(0,t.kq)("",!0)])]),(0,t._)("div",y,[(0,t._)("div",w,[(0,t._)("button",{onClick:s[0]||(s[0]=(...e)=>l.resetPassword&&l.resetPassword(...e)),class:"btn btn-secondary"}," Reset password ")]),(0,t._)("div",v,[(0,t._)("button",{onClick:s[1]||(s[1]=(...e)=>o.logout&&o.logout(...e)),class:"btn btn-secondary"},"Logout")])])])):(0,t.kq)("",!0),((0,t.wg)(),(0,t.j4)(t.lR,{to:"body"},[(0,t.Wm)(_,{messageType:n.messageType,show:n.showMessage,message:n.messageContent,closeMessage:l.closeMessage},null,8,["messageType","show","message","closeMessage"])]))],64)}var _=a(2239),b=a(4028),M=a(6170),T={name:"nav-bar",components:{Message:M.Z},setup(){const e=()=>{_.I8.signOut(_.I8),sessionStorage.clear()};return{logout:e}},data(){return{logged:!1,loggedRole:"",showMessage:!1,messageType:"",messageContent:""}},methods:{printMessage(e,s){this.showMessage=!0,this.messageType=e,this.messageContent=s},closeMessage(){this.showMessage=!1},resetPassword(){(0,b.LS)(_.I8,_.I8.currentUser.email).then((()=>{this.printMessage("success","Password resent sent, check your mailbox!")})).catch((e=>{console.log(e)}))}},mounted(){_.I8.currentUser?(this.logged=!0,this.loggedRole=sessionStorage.getItem("role")):this.logged=!1}},I=a(89);const C=(0,I.Z)(T,[["render",f],["__scopeId","data-v-d5aeafae"]]);var z=C,j={name:"users-list",components:{NavBar:z},data(){return{}},methods:{},mounted(){}};const L=(0,I.Z)(j,[["render",n],["__scopeId","data-v-1b0e5f23"]]);var D=L},6170:function(e,s,a){a.d(s,{Z:function(){return g}});var t=a(3396),o=a(7139);const n=e=>((0,t.dD)("data-v-89fa32fe"),e=e(),(0,t.Cn)(),e),l={class:"close"},i=n((()=>(0,t._)("i",{class:"bi bi-x-lg"},null,-1))),c=[i];function r(e,s,a,n,i,r){return a.show?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,o.C_)(["alert",i.type]),role:"alert"},[(0,t.Uk)((0,o.zw)(a.message)+" ",1),(0,t._)("div",l,[(0,t._)("button",{type:"button",class:"btn button-close",onClick:s[0]||(s[0]=(...e)=>a.closeMessage&&a.closeMessage(...e))},c)])],2)):(0,t.kq)("",!0)}var u={name:"alert-message",props:["show","message","closeMessage","messageType"],data(){return{type:""}},watch:{messageType:function(){this.type="alert-"+this.messageType}},methods:{},mounted(){}},d=a(89);const m=(0,d.Z)(u,[["render",r],["__scopeId","data-v-89fa32fe"]]);var g=m}}]);
//# sourceMappingURL=846.cf879fb2.js.map